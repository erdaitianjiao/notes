## 汇编简单入门

#### 一、汇编分类

​	汇编分为

#### 二、x86-64汇编

##### 	 	 1. **Intel格式**

###### 说明

>1. intel格式汇编中 不区分大小写
>
>2. 代码注释格式为
>
>   ~~~assembly
>   ;本注释为单行注释
>   ;单行注释1
>   
>   comment *
>   sdaf
>   本注释为多行注释
>   123
>   123
>   wer
>   * comment
>   ~~~
>
>   

###### 环境配置

  1. 采用 vscode 插件 MASM/TASM 一键配置dos环境

- debug使用方法

  - -r 指令

    > 参看、改变寄存器的内容
  
    ~~~bash
    -r					# 查看所有寄存器的值
    -r ax           	# 查看ax的值 可以直接输入数据更改ax寄存器的值 若直接回车表示不更改
    ~~~
  
  - -d 指令
  
    >查看内存中的内容
  
    ~~~bash
    -d 0000       		# 后面跟的是偏移地址		段地址默认是DS的值
    -d 0000:0100  		# 后面跟的是段地址加偏移地址 	
    ~~~
  
  - -e 指令
  
    >改变内存的值
  
    ~~~bash
    -e 0100				# 后面跟的是偏移地址		段地址默认是DS的值
    -e 0000:0100		# 后面跟的是段地址加偏移地址 
    ~~~
  
  - -u 指令
  
    >反汇编指令，可以将内存中的一段机器指令翻译成汇编
  
    ~~~bash
    -u 0200				# 后面跟的是偏移地址 	默认段地址是CS的值
    -u 0100:9000       	# 后面跟的是段地址加偏移地址 
    ~~~
  
  - -t 指令
  
    >单步执行机器指令 并打印出寄存器的值
  
    ~~~bash
    -t
    ~~~
  
  - -a 指令
  
    >以汇编的格式在内存中写入机器指令
  
    ~~~bash
    -a					# 默认地址是CS:IP
    -a 0200				# 后面跟的是偏移地址 	默认段地址是CS的值
    -a 0100:9000       	# 后面跟的是段地址加偏移地址 
    ~~~
  
    
  
  ###### 寄存器对照
  
  | 寄存器缩写 | 英文全称与功能说明  |    中文解释    |
  | :--------: | :-----------------: | :------------: |
  |  AH & AL   |  AX (Accumulator)   |   累加寄存器   |
  |  BH & BL   |      BX (Base)      |   基址寄存器   |
  |  CH & CL   |     CX (Count)      |   计数寄存器   |
  |  DH & DL   |      DX (Data)      |   数据寄存器   |
  |     SP     |    Stack Pointer    | 堆栈指针寄存器 |
  |     BP     |    Base Pointer     | 基址指针寄存器 |
  |     SI     |    Source Index     |  源变址寄存器  |
  |     DI     |  Destination Index  | 目的变址寄存器 |
  |     IP     | Instruction Pointer | 指令指针寄存器 |
  |     CS     |    Code Segment     |  代码段寄存器  |
  |     DS     |    Data Segment     |  数据段寄存器  |
  |     SS     |    Stack Segment    |  堆栈段寄存器  |
  |     ES     |    Extra Segment    |  附加段寄存器  |
  
  
  
  | 标志位缩写 |  英文全称与触发条件  |              中文解释               |
  | :--------: | :------------------: | :---------------------------------: |
  |     SF     |      Sign Flag       |       符号标志：结果为负时置1       |
  |     ZF     |      Zero Flag       |        零标志：结果为0时置1         |
  |     CF     |      Carry Flag      |      进位标志：最高位进位时置1      |
  |     AF     | Auxiliary Carry Flag | 辅助进位标志：第3位向第4位进位时置1 |
  |     PF     |     Parity Flag      | 奇偶标志：结果中1的个数为偶数时置1  |
  |     DF     |    Direction Flag    |  方向标志：DF=1时串操作后SI/DI减小  |
  |     IF     |    Interrupt Flag    |  中断标志：IF=1允许响应可屏蔽中断   |
  |     TF     |      Trap Flag       |      陷阱标志：单步调试时启用       |
  |     OF     |    Overflow Flag     |     溢出标志：结果超出范围时置1     |
  
###### 基本指令系统

  1. **mov指令** 

     - 移动指令

     ~~~ assembly
     mov ax, 8		;mov 寄存器, 数据
     mov ax, bx	 	;mov 寄存器, 寄存器
     mov ax, [0]		;mov 寄存器, 内存单元
     mov [0], ax		;mov 内存单元, 寄存器 
     mov ds, ax		;mov 段寄存器, 寄存器
     ~~~

  2. **add指令**

     - 加法指令

     ~~~assembly
     add ax, 8		;add 寄存器, 数据
     add ax, bx	 	;add 寄存器, 寄存器
     add ax, [0]		;add 寄存器, 内存单元
     add [0], ax		;add 内存单元, 寄存器 
     ~~~

  3. **sub指令**  

     - 减法指令

     ~~~assembly
     sub ax, 8		;sub 寄存器, 数据
     sub ax, bx	 	;sub 寄存器, 寄存器
     sub ax, [0]		;sub 寄存器, 内存单元
     sub [0], ax		;sub 内存单元, 寄存器 
     ~~~

  4. **mul指令**

     - 乘法指令

       > - **说明**
       >
       > 两个相乘的数，要么都是8位，严么都是16位<br>
       >
       > 如果都是8位，一个默认放在AL中，另一个放在8位reg或者内存字节单元中<br>
       >
       > 如果都是16位，一个默认放在AX中，一个放在16位reg或者 内存字单元中
       >
       > - **结果**
       >
       > 如果是8位乘法，结果放在AX中<br>
       >
       > 如果是16位乘法，结果的高位在DX中，地位在AX中   

     ~~~assembly
     mul bl					;格式 mul rege：       含义：(ax) = (al) * (bl)
     mul byte ptr ds:[0] 	;格式 mul 内存单元:	  含义：(ax) = (al) * ((ds) * 16 + 0)
     ~~~

  5. **div指令**

     - 除法指令

       >- **说明**
       >
       >可以是8位或16位，存储在寄存器（reg）或内存单元中<br>
       >
       >若除为8位，被除数必须是16位，默认存放在AX中<br>
       >
       >若除为16位，被除数必须是31位，默认存放在 DX:AX 中  (DX存高16位置，AX存低位16位)
       >
       >- **结果**
       >
       >| 位数 |  商  | 余数 |
       >| :--: | :--: | :--: |
       >|  8   |  AL  |  AH  |
       >|  16  |  AX  |  DX  |

     ~~~assembly
     div bl         			;DIV reg        
     DIV byte ptr ds:[0]		;DIV 内存单元    
     ~~~

  6. **and 和 or 指令**

     - 与运算

       ~~~assembly
       and al, 00110110B
       ~~~

     - 或运算

       ~~~assembly
       or al, 00110110B
       ~~~

       

  7. **shl 和 shr 指令**

     - 左移指令 shl

       >将一个寄存器或者内存单元的数据向左移动
       >
       >将最后移出的一位写入CF中
       >
       >最低位用0补充

       ~~~assembly
       shl al, 1  	;将al中的数据左移一位
       ~~~

     - 右移指令 shr

       >将一个寄存器或者内存单元的数据向右移动
       >
       >将最后移出的一位写入CF中
       >
       >最高 位用0补充

       ~~~assembly
       shr al, 1  	;将al中的数据右移一位
       ~~~

  8. **jmp指令**

     - 跳转指令


​     

​      

###### 寻址方式

  - 直接寻址方式
  
    ~~~ assembly
    ;format 格式
    ;mov al, [value]
    mov al, [1064H] 		;将 DS:1064 中的数据赋值给al
    mov al, ds:[1064H]		;将 DS:1064 中的数据赋值给al
    mov al, es:[1064H]		;将 ES:1064 中的数据赋值给al	ES 是附加数据段
    ~~~
    
  - 寄存器间接寻址
  
    ~~~assembly
    ~~~
  
  - 

###### 数据定义

  >- **DB(Define Byte)** 
  >
  >  ​	定义变量的类型为字节，就是8bit，后面跟的表示每个数据占一个字节 定义字符串用它
  >
  >- **DW(Define Word)**
  >
  >  ​	定义变量为字，一个字等于两个字节，就是 16bit
  >
  >- **DD(Define Double Word)**
  >
  >  ​	定义类型为双字，DD后面跟的操作符号表示占有两个字，即4个字节，32bit，在内存中存放，低价位字在前，高位字在后

  ~~~assembly
  db	4,5					;定义 
  db  "helloword",10,"$"	;定义一个字符串
  dw	12,12				;定义 16bit 数据
  dd	34,45				;
  dq	45,45,567			;
  dt  231,345,56			;
  ~~~

  



##### 2. **AT&T格式**



#### 三、ARM汇编

arm汇编

##### 		1. ARM标准汇编 (ARM Standard Assembly)

- 环境配置 
  1. 采用集成式开发环境 keil MDK
  2. 


​	



