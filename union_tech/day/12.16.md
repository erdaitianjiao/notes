#### 一、概述

1. 简单使用fs_mark重测了一下ntfsplus的数据，发现在使用fs_mark的时候，ext4性能情况甚至弱于ntfs3，将数据整理成文档

2. 简单测试了一下large-folio的fs数据，在没有更换内核(ntfsplus-next)的情况下初步发现，在aes加密中 xfs启用large-folio对顺序读写效率的影响不大

#### 二、下一步计划

1. 进一步验证是否启用large-folio， 运行时 large-folio 状态验证，通过查看调用栈中是否存在`split_huge_pmd_folio()`等函数

2. 评估 Ext4 和 XFS 在 Large Folio 优化上的区别
3. 在最新版以及6.1版内核中xfs启用large-folio是否存在区别

#### 三、测试数据

目前的测试命令 

````bash
# 查看large folio启用状态
cat /sys/kernel/mm/transparent_hugepage/enabled

# 启用large folio
echo always > /sys/kernel/mm/transparent_hugepage/enabled

# 格式化成64k的page
mkfs.xfs -b size=64k -f /dev/mapper/aes_disk

# 格式化ext4
mkfs.ext4 -O large_file /dev/mapper/aes_disk 
````

![image-20251216174657725](/home/tianjiao/.config/Typora/typora-user-images/image-20251216174657725.png)

##### Large-folio-write (AES) 顺序读

![image-20251216175633321](/home/tianjiao/.config/Typora/typora-user-images/image-20251216175633321.png)

##### Large-folio-read (AES) 顺序写

![image-20251216175812849](/home/tianjiao/.config/Typora/typora-user-images/image-20251216175812849.png)

##### Normal-write (AES) 顺序写

![image-20251216180013118](/home/tianjiao/.config/Typora/typora-user-images/image-20251216180013118.png)

##### Normal-read (AES) 顺序读

![image-20251216180114738](/home/tianjiao/.config/Typora/typora-user-images/image-20251216180114738.png)