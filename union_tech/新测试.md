#### 五、测试结果

##### 1) dd测试 无缓存测试 (dd15次取平均)

1.裸盘测试结果

``` bash
# 普通磁盘测试
dd if=/dev/zero of=/dev/nvme0n1p6 bs=1M count=1024 oflag=direct status=progress
 
# 测试结果
Average speed: 2457.60 MB/s

# aes测试
dd if=/dev/zero of=/dev/mapper/aes_disk bs=1M count=1024 oflag=direct status=progress

# 测试结果
Average speed: 821.20 MB/s

```

2. 文件系统测试结果

``` bash
# 一般磁盘
dd if=/dev/zero of=/home/test/workspace/NOR_test/tmpfilee bs=1M count=1024 oflag=direct status=progress

# 测试结果
Average speed: 2324.48 MB/s


# 加密磁盘测试
dd if=/dev/zero of=/home/test/workspace/AES_test/tmpfilee bs=1M count=1024 oflag=direct status=progress

# 测试结果
Average speed: 806.90 MB/s
```

##### 2) iozone 无缓存测试

1. 裸盘测试结果

```bash
# 普通磁盘裸盘
sudo iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -I -r 1M -s 1G -f /dev/nvme0n1p6
        Iozone: Performance Test of File I/O
                Version $Revision: 3.508 $
                Compiled for 64 bit mode.
                Build: linux 

        Run began: Tue Nov 18 15:43:56 2025

        O_DIRECT feature enabled
        Record Size 1024 kB
        File size set to 1048576 kB
        Command line used: iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -I -r 1M -s 1G -f /dev/nvme0n1p6
        Output is in kBytes/sec
        Time Resolution = 0.000001 seconds.
        Processor cache size set to 1024 kBytes.
        Processor cache line size set to 32 bytes.
        File stride size set to 17 * record size.
        
    
                                                                    random    random      bkwd     record     stride                                        
              kB  reclen    write    rewrite      read    reread      read     write      read    rewrite       read    fwrite  frewrite     fread   freread
         1048576    1024   2889044   2826068   2425126   2612759   2324079   2869328   2438973    2837900    2415394   1606380   1602494   3091357   3109452



# aes裸盘
sudo iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -I -r 1M -s 1G -f /dev/mapper/aes_disk
        Iozone: Performance Test of File I/O
                Version $Revision: 3.508 $
                Compiled for 64 bit mode.
                Build: linux 

        Run began: Tue Nov 18 15:41:54 2025

        O_DIRECT feature enabled
        Record Size 1024 kB
        File size set to 1048576 kB
        Command line used: iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -I -r 1M -s 1G -f /dev/mapper/aes_disk
        Output is in kBytes/sec
        Time Resolution = 0.000001 seconds.
        Processor cache size set to 1024 kBytes.
        Processor cache line size set to 32 bytes.
        File stride size set to 17 * record size.
                                                                    random    random      bkwd     record     stride                                        
              kB  reclen    write    rewrite      read    reread      read     write      read    rewrite       read    fwrite  frewrite     fread   freread
         1048576    1024    866513    863772    682076    695469    723252    866790    740264     818853     717840   2274513   2156117   1255954   1255513



```

2. 文件系统iozone测试

``` bash
# 普通磁盘iozone
sudo iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -I -r 1M -s 1G -f ./tmpfile
        Iozone: Performance Test of File I/O
                Version $Revision: 3.508 $
                Compiled for 64 bit mode.
                Build: linux 

        Run began: Tue Nov 18 15:48:34 2025

        O_DIRECT feature enabled
        Record Size 1024 kB
        File size set to 1048576 kB
        Command line used: iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -I -r 1M -s 1G -f ./tmpfile
        Output is in kBytes/sec
        Time Resolution = 0.000001 seconds.
        Processor cache size set to 1024 kBytes.
        Processor cache line size set to 32 bytes.
        File stride size set to 17 * record size.
                                                                    random    random      bkwd     record     stride                                        
              kB  reclen    write    rewrite      read    reread      read     write      read    rewrite       read    fwrite  frewrite     fread   freread
         1048576    1024   2815074   2884309   2424503   2525581   2319150   2821058   2432253    2885062    2378882   2194408   2839215  12378409  12527020


# aes文件系统iozone测试
sudo iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -I -r 1M -s 1G -f ./tmpfile
        Iozone: Performance Test of File I/O
                Version $Revision: 3.508 $
                Compiled for 64 bit mode.
                Build: linux 

        Run began: Tue Nov 18 15:46:21 2025

        O_DIRECT feature enabled
        Record Size 1024 kB
        File size set to 1048576 kB
        Command line used: iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -I -r 1M -s 1G -f ./tmpfile
        Output is in kBytes/sec
        Time Resolution = 0.000001 seconds.
        Processor cache size set to 1024 kBytes.
        Processor cache line size set to 32 bytes.
        File stride size set to 17 * record size.
                                                                    random    random      bkwd     record     stride                                        
              kB  reclen    write    rewrite      read    reread      read     write      read    rewrite       read    fwrite  frewrite     fread   freread
         1048576    1024    837641    841461    665848    641607    699055    850816    715242     859314     717601   2252977   2168016  11877309  12088695

```

##### 3) 有缓存dd策划

```bash
# 普通文件
sudo dd if=/dev/zero of=/home/test/workspace/NOR_test/testfile bs=1M 

1073741824 bytes (1.1 GB, 1.0 GiB) copied, 0.535676 s, 2.0 GB/s


# aes文件
sudo dd if=/dev/zero of=/home/test/workspace/AES_test/testfile bs=1M count=1024 status=progress

1073741824 bytes (1.1 GB, 1.0 GiB) copied, 0.552523 s, 1.9 GB/s
```



##### 3) 有缓存iozone测试 

######  1G 组 (根本没用 这个两个数据没有差别)

```bash
# 普通磁盘数据
sudo iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -r 1M -s 1G -f ./tmpfile
        Iozone: Performance Test of File I/O
                Version $Revision: 3.508 $
                Compiled for 64 bit mode.
                Build: linux 

        Run began: Tue Nov 18 15:58:14 2025

        Record Size 1024 kB
        File size set to 1048576 kB
        Command line used: iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -r 1M -s 1G -f ./tmpfile
        Output is in kBytes/sec
        Time Resolution = 0.000001 seconds.
        Processor cache size set to 1024 kBytes.
        Processor cache line size set to 32 bytes.
        File stride size set to 17 * record size.
                                                                    random    random      bkwd     record     stride                                        
              kB  reclen    write    rewrite      read    reread      read     write      read    rewrite       read    fwrite  frewrite     fread   freread
         1048576    1024   2158896   2992512  10551585  10614076  10346474   3000947  10093540   10455736   10339566   2868559   2718935  10376500  10529783


# aes测试
sudo iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -r 1M -s 1G -f ./tmpfile
        Iozone: Performance Test of File I/O
                Version $Revision: 3.508 $
                Compiled for 64 bit mode.
                Build: linux 

        Run began: Tue Nov 18 16:12:24 2025

        Record Size 1024 kB
        File size set to 1048576 kB
        Command line used: iozone -i 0 -i 1 -i 2 -i 3 -i 4 -i 5 -i 6 -i 7 -r 1M -s 1G -f ./tmpfile
        Output is in kBytes/sec
        Time Resolution = 0.000001 seconds.
        Processor cache size set to 1024 kBytes.
        Processor cache line size set to 32 bytes.
        File stride size set to 17 * record size.
                                                                    random    random      bkwd     record     stride                                        
              kB  reclen    write    rewrite      read    reread      read     write      read    rewrite       read    fwrite  frewrite     fread   freread
         1048576    1024   2149625   2950982  10349445  10368280  10191425   2950329  10126845   10688209    9132975   2893389   2653145  10290552  10483125


```

###### 16G 组 

```

```

##### 4) 有缓存fio测试 

###### 8G组

```bash
# 总结
# nor 1846m/s aes 1367m/s

[writejob]
ioengine=sync
direct=0
rw=write
bs=64k
size=8G
filename=testfile
numjobs=1
iodepth=32

# norfio 测试 8G
writejob: (g=0): rw=write, bs=(R) 64.0KiB-64.0KiB, (W) 64.0KiB-64.0KiB, (T) 64.0KiB-64.0KiB, ioengine=sync, iodepth=32
fio-3.12
Starting 1 process
writejob: Laying out IO file (1 file / 8192MiB)
Jobs: 1 (f=1): [W(1)][100.0%][w=1818MiB/s][w=29.1k IOPS][eta 00m:00s]
writejob: (groupid=0, jobs=1): err= 0: pid=38808: Tue Nov 18 16:28:22 2025
  write: IOPS=29.5k, BW=1846MiB/s (1936MB/s)(8192MiB/4437msec); 0 zone resets
    clat (usec): min=22, max=398, avg=33.03, stdev= 8.89
     lat (usec): min=23, max=398, avg=33.41, stdev= 8.90
    clat percentiles (usec):
     |  1.00th=[   26],  5.00th=[   28], 10.00th=[   28], 20.00th=[   29],
     | 30.00th=[   30], 40.00th=[   30], 50.00th=[   31], 60.00th=[   32],
     | 70.00th=[   34], 80.00th=[   36], 90.00th=[   41], 95.00th=[   49],
     | 99.00th=[   63], 99.50th=[   98], 99.90th=[  117], 99.95th=[  124],
     | 99.99th=[  137]
   bw (  MiB/s): min= 1768, max= 2066, per=100.00%, avg=1848.23, stdev=97.77, samples=8
   iops        : min=28298, max=33056, avg=29571.75, stdev=1564.27, samples=8
  lat (usec)   : 50=95.92%, 100=3.68%, 250=0.40%, 500=0.01%
  cpu          : usr=3.22%, sys=96.51%, ctx=12, majf=0, minf=21
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=0,131072,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=32

Run status group 0 (all jobs):
  WRITE: bw=1846MiB/s (1936MB/s), 1846MiB/s-1846MiB/s (1936MB/s-1936MB/s), io=8192MiB (8590MB), run=4437-4437msec

Disk stats (read/write):
  nvme0n1: ios=6/13954, merge=0/13, ticks=9/318882, in_queue=318892, util=50.46


# aesfio测试 8G

writejob: (g=0): rw=write, bs=(R) 64.0KiB-64.0KiB, (W) 64.0KiB-64.0KiB, (T) 64.0KiB-64.0KiB, ioengine=sync, iodepth=32
fio-3.12
Starting 1 process
writejob: Laying out IO file (1 file / 8192MiB)
Jobs: 1 (f=1): [W(1)][100.0%][w=1169MiB/s][w=18.7k IOPS][eta 00m:00s]
writejob: (groupid=0, jobs=1): err= 0: pid=41036: Tue Nov 18 16:36:46 2025
  write: IOPS=21.9k, BW=1367MiB/s (1433MB/s)(8192MiB/5994msec); 0 zone resets
    clat (usec): min=21, max=6431, avg=44.83, stdev=36.22
     lat (usec): min=21, max=6432, avg=45.21, stdev=36.23
    clat percentiles (usec):
     |  1.00th=[   25],  5.00th=[   26], 10.00th=[   27], 20.00th=[   28],
     | 30.00th=[   28], 40.00th=[   29], 50.00th=[   29], 60.00th=[   30],
     | 70.00th=[   34], 80.00th=[   73], 90.00th=[   93], 95.00th=[  108],
     | 99.00th=[  133], 99.50th=[  147], 99.90th=[  310], 99.95th=[  347],
     | 99.99th=[  465]
   bw (  MiB/s): min= 1236, max= 2102, per=100.00%, avg=1391.70, stdev=250.18, samples=11
   iops        : min=19780, max=33636, avg=22267.27, stdev=4002.87, samples=11
  lat (usec)   : 50=74.03%, 100=18.93%, 250=6.86%, 500=0.17%, 750=0.01%
  lat (msec)   : 2=0.01%, 10=0.01%
  cpu          : usr=3.17%, sys=96.01%, ctx=81, majf=0, minf=24
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=0,131072,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=32

Run status group 0 (all jobs):
  WRITE: bw=1367MiB/s (1433MB/s), 1367MiB/s-1367MiB/s (1433MB/s-1433MB/s), io=8192MiB (8590MB), run=5994-5994msec

Disk stats (read/write):
    dm-0: ios=0/6968, merge=0/0, ticks=0/252592, in_queue=252592, util=54.11%, aggrios=2/14185, aggrmerge=0/25, aggrticks=1/131105, aggrin_queue=131107, aggrutil=36.95%
  nvme0n1: ios=2/14185, merge=0/25, ticks=1/131105, in_queue=131107, util=36.95%
```

###### 16G组

```bash
# 普通磁盘io
writejob: (g=0): rw=write, bs=(R) 64.0KiB-64.0KiB, (W) 64.0KiB-64.0KiB, (T) 64.0KiB-64.0KiB, ioengine=sync, iodepth=32
fio-3.12
Starting 1 process
writejob: Laying out IO file (1 file / 16384MiB)
Jobs: 1 (f=1): [W(1)][100.0%][w=1611MiB/s][w=25.8k IOPS][eta 00m:00s]
writejob: (groupid=0, jobs=1): err= 0: pid=39116: Tue Nov 18 16:29:46 2025
  write: IOPS=28.3k, BW=1766MiB/s (1852MB/s)(16.0GiB/9278msec); 0 zone resets
    clat (usec): min=22, max=42678, avg=34.58, stdev=83.91
     lat (usec): min=23, max=42679, avg=34.96, stdev=83.91
    clat percentiles (usec):
     |  1.00th=[   27],  5.00th=[   28], 10.00th=[   28], 20.00th=[   29],
     | 30.00th=[   30], 40.00th=[   31], 50.00th=[   31], 60.00th=[   33],
     | 70.00th=[   35], 80.00th=[   38], 90.00th=[   47], 95.00th=[   54],
     | 99.00th=[   71], 99.50th=[   98], 99.90th=[  120], 99.95th=[  126],
     | 99.99th=[  147]
   bw (  MiB/s): min= 1503, max= 2056, per=100.00%, avg=1766.05, stdev=117.07, samples=18
   iops        : min=24052, max=32906, avg=28256.72, stdev=1873.08, samples=18
  lat (usec)   : 50=92.07%, 100=7.51%, 250=0.42%, 500=0.01%
  lat (msec)   : 50=0.01%
  cpu          : usr=2.83%, sys=96.49%, ctx=16, majf=0, minf=33
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=0,262144,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=32

Run status group 0 (all jobs):
  WRITE: bw=1766MiB/s (1852MB/s), 1766MiB/s-1766MiB/s (1852MB/s-1852MB/s), io=16.0GiB (17.2GB), run=9278-9278msec

Disk stats (read/write):
  nvme0n1: ios=71/29730, merge=407/294, ticks=29/923719, in_queue=923750, util=54.05%


# AES加密磁盘IO
writejob: (g=0): rw=write, bs=(R) 64.0KiB-64.0KiB, (W) 64.0KiB-64.0KiB, (T) 64.0KiB-64.0KiB, ioengine=sync, iodepth=32
fio-3.12
Starting 1 process
writejob: Laying out IO file (1 file / 16384MiB)
Jobs: 1 (f=1): [W(1)][100.0%][w=411MiB/s][w=6573 IOPS][eta 00m:00s] 
writejob: (groupid=0, jobs=1): err= 0: pid=40152: Tue Nov 18 16:33:28 2025
  write: IOPS=16.8k, BW=1052MiB/s (1103MB/s)(16.0GiB/15572msec); 0 zone resets
    clat (usec): min=20, max=2316.8k, avg=58.51, stdev=4534.18
     lat (usec): min=20, max=2316.8k, avg=58.89, stdev=4534.18
    clat percentiles (usec):
     |  1.00th=[   25],  5.00th=[   27], 10.00th=[   27], 20.00th=[   28],
     | 30.00th=[   29], 40.00th=[   29], 50.00th=[   30], 60.00th=[   31],
     | 70.00th=[   32], 80.00th=[   43], 90.00th=[   93], 95.00th=[  109],
     | 99.00th=[  135], 99.50th=[  155], 99.90th=[  433], 99.95th=[ 8225],
     | 99.99th=[13829]
   bw (  MiB/s): min=   25, max= 2048, per=100.00%, avg=1165.18, stdev=431.81, samples=28
   iops        : min=  408, max=32770, avg=18642.79, stdev=6908.89, samples=28
  lat (usec)   : 50=81.02%, 100=11.57%, 250=7.16%, 500=0.15%, 750=0.01%
  lat (usec)   : 1000=0.01%
  lat (msec)   : 2=0.01%, 4=0.01%, 10=0.03%, 20=0.04%, 50=0.01%
  cpu          : usr=1.53%, sys=70.96%, ctx=437, majf=0, minf=41
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=0,262144,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=32

Run status group 0 (all jobs):
  WRITE: bw=1052MiB/s (1103MB/s), 1052MiB/s-1052MiB/s (1103MB/s-1103MB/s), io=16.0GiB (17.2GB), run=15572-15572msec

Disk stats (read/write):
    dm-0: ios=0/12156, merge=0/0, ticks=0/4145552, in_queue=4145552, util=73.78%, aggrios=66/23804, aggrmerge=399/202, aggrticks=49/1457089, aggrin_queue=1457145, aggrutil=64.59%
  nvme0n1: ios=66/23804, merge=399/202, ticks=49/1457089, in_queue=1457145, util=64.59%

```

