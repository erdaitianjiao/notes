~~~mermaid
flowchart TD
    A["开始"] --> B["显示提示信息“Please Press Any Key to input a letter”及功能号为1的接收键盘输入单个字符的指令序列"]
    B --> C{"(AL) &lt; '0'?"}
    C -->|Y| D["输入的是其它字符，显示信息"]
    C -->|N| E{"(AL) &lt;= '9'?"}
    E -->|Y| F["输入的是数字，显示有关信息"]
    E -->|N| G{"(AL) &lt; 'A'?"}
    G -->|Y| D
    G -->|N| H{"(AL) &lt;= 'Z'?"}
    H -->|Y| I["输入的是大写字母，显示信息"]
    H -->|N| J{"(AL) &lt; 'a'?"}
    J -->|Y| D
    J -->|N| K{"(AL) &lt;= 'z'?"}
    K -->|Y| L["输入的是小写字母，显示信息"]
    K -->|N| D
    F --> M["结束"]
    I --> M
    L --> M
    D --> M
~~~

~~~mermaid
graph TD;
    A["开始"] --> B["初始化各寄存器"];
    B --> C["初始化8255和8253芯片"];
    C --> D["进入主循环"];
    D --> E["读取A口数据(按键状态)"];
    E --> F{"是否停止?"};
    F -->|是| G["设置电机停止状态"];
    F -->|否| H{"检测按键是否变化?"};
    H -->|否| I["跳至按键扫描"];
    H -->|是| J["处理定时计数"];
    J --> K{"倒计时结束?"};
    K -->|是| L["检查工作状态并更新"];
    K -->|否| M["根据工作状态控制电机"];
    M --> N["按键扫描"];
    N --> O["处理各按键(停止/开启/洗涤/脱水)"];
    O --> P["更新LED显示和电机控制信号"];
    P --> D;
~~~



~~~mermaid
graph TD
    开始[开始] --> 初始化[系统初始化]
    初始化 --> 主循环[进入主循环]
    主循环 --> 读取按键[读取A口按键输入]
    读取按键 --> 停止判断{停止标志=1?}
    停止判断 -- 是 --> 电机停止[电机状态设为停止]
    停止判断 -- 否 --> 时间计数[时间计数处理]
    时间计数 --> 计数判断{CNT=0?}
    计数判断 -- 否 --> 电机控制[电机控制逻辑]
    计数判断 -- 是 --> 状态转换{设置状态=3且当前状态=2?}
    状态转换 -- 是 --> 切换脱水[设置脱水状态,CNT=9]
    状态转换 -- 否 --> 设置停止[设置停止标志=1]
    切换脱水 --> 电机控制
    设置停止 --> 电机停止
    电机控制 --> 方向判断{当前状态=洗涤?}
    方向判断 -- 是 --> 正反转[根据CNT奇偶控制方向]
    方向判断 -- 否 --> 正向转[持续正向转动]
    正反转 --> 更新步数[更新电机步数]
    正向转 --> 更新步数
    更新步数 --> LED显示[更新LED倒计时显示]
    电机停止 --> LED显示
    LED显示 --> 按键处理[按键扫描处理]
    按键处理 --> 模式判断{按键输入?}
    模式判断 -- 启动/洗涤/脱水 --> 设置模式[更新工作模式和CNT]
    模式判断 -- 无/停止 --> 主循环
    设置模式 --> 主循环
~~~

